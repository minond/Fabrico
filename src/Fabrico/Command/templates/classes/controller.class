<?php

namespace {package}\Controller;

use Efficio\Http\Request;
use Efficio\Http\Response;
use {package}\Model\{clazz};

class {clazzes}
{
    public function index(Request $req, Response $res)
    {
        return [ '{plural}' => {clazz}::all() ];
    }

    public function add(Request $req, Response $res)
    {
        return [ '{singular}' => new {clazz} ];
    }

    public function edit(Request $req, Response $res)
    {
        return [ '{singular}' => {clazz}::find($req->param->id) ];
    }

    public function create(Request $req, Response $res)
    {
        ${singular} = {clazz}::create($req->param->{singular});
        ${singular}->save();
        $res->header['Location'] = '/{plural}';
    }

    public function update(Request $req, Response $res)
    {
        ${singular} = {clazz}::find($req->param->id);
        ${singular}->update($req->param->{singular});
        ${singular}->save();
        $res->header['Location'] = '/{plural}';
    }

    public function delete(Request $req, Response $res)
    {
        ${singular} = {clazz}::find($req->param->id);
        ${singular}->delete();
        $res->header['Location'] = '/{plural}';
    }
}
